<!doctype html>
<html>
<head>
</head>
<body>

<canvas width="345" height="234"></canvas>

<script>
(function(ctx) {
  var point_start       = { x: 0,                    y: ctx.canvas.height / 3 },
      point_end         = { x: ctx.canvas.width / 2, y: ctx.canvas.height };
  var vector_gradient   = [point_end.x - point_start.x, point_end.y - point_start.y],
      length_gradient   = Math.sqrt(Math.pow(vector_gradient[0], 2) + Math.pow(vector_gradient[1], 2)),
      vector_normalized = [vector_gradient[0] / length_gradient, vector_gradient[1] / length_gradient];
  var vector_this, result_scalar, result_normalized;
  var pixels = ctx.createImageData(ctx.canvas.width, ctx.canvas.height), offset;
  for (var y = 0; y < ctx.canvas.height; y ++) {
    for (var x = 0; x < ctx.canvas.width; x ++) {
      vector_this       = [x - point_start.x, y - point_start.y],
      result_scalar     = (vector_normalized[0] * vector_this[0]) + (vector_normalized[1] * vector_this[1]),
      result_normalized = result_scalar / length_gradient;
      offset            = (x + y * ctx.canvas.width) * 4;
      pixels.data[offset + 0] =
      pixels.data[offset + 1] =
      pixels.data[offset + 2] = 255 * Math.max(0, Math.min(1, result_normalized));
      pixels.data[offset + 3] = 255;
    }
  }
  ctx.putImageData(pixels, 0, 0);
  ctx.fillStyle = 'red';
  ctx.fillRect(point_start.x - 4, point_start.y - 4, 8, 8);
  ctx.fillStyle = 'blue';
  ctx.fillRect(point_end.x - 4, point_end.y - 4, 8, 8);
})(ctx = document.getElementsByTagName('canvas')[0].getContext('2d'));
</script>

</body>
</html>
